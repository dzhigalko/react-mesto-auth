{"ast":null,"code":"import Api from \"./Api\";\nclass MestoApi extends Api {\n  constructor(options) {\n    const {\n      token,\n      ...rest\n    } = options;\n    super(rest);\n    this._token = token;\n  }\n  _makeRequest(url, options) {\n    const {\n      headers,\n      ...rest\n    } = options;\n    super._makeRequest(url, {});\n    options = options || {};\n    const {\n      method = \"GET\",\n      body\n    } = options;\n    let jsonBody = null;\n    if (body) {\n      jsonBody = JSON.stringify(body);\n    }\n    return fetch(`${this._baseUrl}/${url}`, {\n      method: method,\n      body: jsonBody,\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      if (!res.ok) {\n        return Promise.reject({\n          \"response\": res\n        });\n      }\n      return res.json();\n    }).catch(this._errorHandler);\n  }\n  getInitialCards() {\n    return this._makeRequest(\"/cards\");\n  }\n  getUserProfile() {\n    return this._makeRequest(\"/users/me\");\n  }\n  changeUserProfile(name, about) {\n    return this._makeRequest(\"/users/me\", {\n      method: \"PATCH\",\n      body: {\n        name: name,\n        about: about\n      }\n    });\n  }\n  addCard(name, link) {\n    return this._makeRequest(\"/cards\", {\n      method: \"POST\",\n      body: {\n        name: name,\n        link: link\n      }\n    });\n  }\n  deleteCard(id) {\n    return this._makeRequest(`/cards/${id}`, {\n      method: \"DELETE\"\n    });\n  }\n  addCardLike(id) {\n    return this._makeRequest(`/cards/${id}/likes`, {\n      method: \"PUT\"\n    });\n  }\n  deleteCardLike(id) {\n    return this._makeRequest(`/cards/${id}/likes`, {\n      method: \"DELETE\"\n    });\n  }\n  changeAvatar(avatar) {\n    return this._makeRequest(\"/users/me/avatar\", {\n      method: \"PATCH\",\n      body: {\n        avatar: avatar\n      }\n    });\n  }\n}\nconst mestoApi = new MestoApi({\n  baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-66\",\n  token: \"31abe394-3f89-489d-9ccd-e96da397bf7c\",\n  errorHandler: args => console.log(args)\n});\nexport default mestoApi;","map":{"version":3,"names":["Api","MestoApi","constructor","options","token","rest","_token","_makeRequest","url","headers","method","body","jsonBody","JSON","stringify","fetch","_baseUrl","authorization","then","res","ok","Promise","reject","json","catch","_errorHandler","getInitialCards","getUserProfile","changeUserProfile","name","about","addCard","link","deleteCard","id","addCardLike","deleteCardLike","changeAvatar","avatar","mestoApi","baseUrl","errorHandler","args","console","log"],"sources":["/Users/d.zhigalko/dev/mesto-react/src/utils/mestoApi.js"],"sourcesContent":["import Api from \"./Api\"\n\nclass MestoApi extends Api {\n  constructor(options) {\n    const { token, ...rest } = options\n    super(rest)\n\n    this._token = token\n  }\n\n  _makeRequest(url, options) {\n    const { headers, ...rest } = options\n\n    super._makeRequest(url, {\n\n    })\n    options = options || {}\n    const { method = \"GET\", body } = options;\n    let jsonBody = null;\n\n    if (body) {\n      jsonBody = JSON.stringify(body)\n    }\n\n    return fetch(`${this._baseUrl}/${url}`, {\n      method: method,\n      body: jsonBody,\n      headers: {\n        authorization: this._token,\n        'Content-Type': 'application/json'\n      }\n    })\n      .then((res) => {\n        if (!res.ok) {\n          return Promise.reject({\"response\": res})\n        }\n\n        return res.json()\n      }).catch(this._errorHandler);\n  }\n\n  getInitialCards() {\n    return this._makeRequest(\"/cards\")\n  }\n\n  getUserProfile() {\n    return this._makeRequest(\"/users/me\")\n  }\n\n  changeUserProfile(name, about) {\n    return this._makeRequest(\"/users/me\", {\n      method: \"PATCH\",\n      body: {\n        name: name,\n        about: about\n      }\n    })\n  }\n\n  addCard(name, link) {\n    return this._makeRequest(\"/cards\", {\n      method: \"POST\",\n      body: {\n        name: name,\n        link: link\n      }\n    })\n  }\n\n  deleteCard(id) {\n    return this._makeRequest(`/cards/${id}`, { method: \"DELETE\" });\n  }\n\n  addCardLike(id) {\n    return this._makeRequest(`/cards/${id}/likes`, { method: \"PUT\" });\n  }\n\n  deleteCardLike(id) {\n    return this._makeRequest(`/cards/${id}/likes`, { method: \"DELETE\" });\n  }\n\n  changeAvatar(avatar) {\n    return this._makeRequest(\"/users/me/avatar\", {\n      method: \"PATCH\",\n      body: {\n        avatar: avatar\n      }\n    })\n  }\n}\n\nconst mestoApi = new MestoApi({\n  baseUrl: \"https://mesto.nomoreparties.co/v1/cohort-66\",\n  token: \"31abe394-3f89-489d-9ccd-e96da397bf7c\",\n  errorHandler: (args) => console.log(args)}\n)\n\nexport default mestoApi;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}